# Pingora Slice Streaming Proxy Configuration
# Full configuration example with all options

# Slice configuration (for slice-based proxy, not used in streaming proxy)
slice_size: 1048576  # 1MB
max_concurrent_subrequests: 4
max_retries: 3
slice_patterns:
  - ".*"  # Match all URLs

# Cache configuration
enable_cache: true
cache_ttl: 3600  # 1 hour in seconds

# L1 (memory) cache configuration
l1_cache_size_bytes: 104857600  # 100MB

# L2 (disk) cache configuration
enable_l2_cache: true
l2_backend: "raw_disk"  # Options: "file" or "raw_disk"
l2_cache_dir: "/var/cache/pingora-slice"  # Used for file backend

# Raw disk cache configuration (only used when l2_backend is "raw_disk")
raw_disk_cache:
  device_path: "/tmp/pingora-raw-cache"  # Path to raw disk device or file
  total_size: 10737418240  # 10GB
  block_size: 4096  # 4KB
  use_direct_io: true  # Use O_DIRECT for better performance
  enable_compression: true  # Enable data compression
  enable_prefetch: true  # Enable prefetching
  enable_zero_copy: true  # Enable zero-copy operations

# Upstream server configuration
upstream_address: "mirrors.verycloud.cn:80"

# Metrics endpoint configuration (optional)
metrics_endpoint:
  enabled: true
  address: "127.0.0.1:9090"

# Purge configuration (optional)
purge:
  enabled: true
  auth_token: "secret-token-here"  # Optional authentication token
  enable_metrics: true  # Enable Prometheus metrics for purge operations
